import{_ as $}from"./dialog.vue_vue_type_script_setup_true_lang-e2945fcc.js";import{_ as z}from"./base-button.vue_vue_type_script_setup_true_lang-4855967e.js";import{o as a,c as r,b as e,d as k,s as v,j as C,n as x,u as s,U as j,I as T,Z,r as w,a as c,w as m,q as b,p as y,F as A,K as E,x as L,_ as M,h as N}from"./app-b27d1e1c.js";import{r as O}from"./ExclamationCircleIcon-58d6f6ac.js";import{r as S}from"./XCircleIcon-f8a24405.js";import{_ as V}from"./icon-publish-d174d932.js";import"./transition-fb6f7415.js";import"./_plugin-vue_export-helper-c27b6911.js";function I(u,o){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z","clip-rule":"evenodd"})])}function D(u,o){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z","clip-rule":"evenodd"})])}const H={class:"flex items-start gap-2"},R={class:"mt-0.5 shrink-0"},U={class:"flex-1 md:flex md:justify-between"},F={class:"text-sm"},W=k({__name:"alert",props:{variant:{default:"info"}},setup(u){const o=u,p=v(()=>({info:"bg-blue-50 border border-blue-500 text-blue-700",success:"bg-green-50 border border-green-500 text-green-700",warning:"bg-yellow-50 border border-yellow-500 text-yellow-700",error:"bg-red-50 border border-red-500 text-red-700"})[o.variant]),l=v(()=>({info:"text-blue-400",success:"text-green-400",warning:"text-yellow-400",error:"text-red-400"})[o.variant]),n=v(()=>({info:D,success:I,warning:O,error:S})[o.variant]);return(g,_)=>(a(),r("div",{class:x(["rounded-md px-2 py-2.5",[s(p)]])},[e("div",H,[e("div",R,[(a(),C(j(s(n)),{class:x(["size-4",s(l)]),"aria-hidden":"true"},null,8,["class"]))]),e("div",U,[e("p",F,[T(g.$slots,"default")])])])],2))}});function q(u,o){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"}),e("path",{d:"M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"})])}const K={key:0,class:"relative flex flex-col items-start justify-center gap-4 px-6 py-4"},G={class:"flex w-full items-start gap-4"},J={class:"flex size-16 shrink-0"},Q={key:0,class:"w-full text-center"},X={key:1,class:"relative flex flex-col items-start justify-center gap-4 px-6 py-4"},le=k({__name:"publish-translations",props:{canPublish:{type:Boolean},isProductionEnv:{type:Boolean}},setup(u){const o=Z(),{close:p}=E(),l=w(!1),n=w(!1),g=()=>{l.value=!0,L.post(route("ltu.translation.export"),{},{preserveScroll:!0,onSuccess:()=>{l.value=!1,p()}})},_=()=>{n.value=!0,fetch(route("ltu.translation.download")).then(async i=>{let t=await i.blob();n.value=!1;const d=document.createElement("a"),f=window.URL.createObjectURL(t);d.download="lang.zip",d.href=f,document.body.appendChild(d),d.click(),document.body.removeChild(d),n.value=!1,p()}).catch(i=>{o.error("Something went wrong, please try again.",{icon:!0,position:M.BOTTOM_CENTER})})};return(i,t)=>{const d=N,f=V,B=W,h=z,P=$;return a(),r(A,null,[c(d,{title:"Add Languages"}),c(P,{size:"lg"},{default:m(()=>[i.canPublish?(a(),r("div",K,[e("div",G,[e("div",J,[c(f,{class:"size-16 text-blue-300"})]),t[0]||(t[0]=e("div",{class:"flex-1"},[e("h3",{class:"text-xl font-semibold leading-6 text-gray-600"}," Publish Translations "),e("p",{class:"mt-1 text-sm text-gray-500"}," Be cautious when publishing, as this action will update your project with all translations and changes made in the database, overwriting project files. ")],-1))]),i.isProductionEnv?(a(),r("div",Q,[c(B,{variant:"warning",class:"text-left"},{default:m(()=>[...t[1]||(t[1]=[e("strong",null,"Warning:",-1),b(" This is a Production Environment. Publishing translations will causing issues with version control and other developers, Please use the download button below instead. ",-1)])]),_:1}),c(h,{disabled:s(l)||s(n),"is-loading":s(n),variant:"dark",size:"lg",class:"mt-4","full-width":"",target:"_blank",onClick:_},{default:m(()=>[c(s(q),{class:"size-4"}),t[2]||(t[2]=e("span",null,"Download",-1))]),_:1},8,["disabled","is-loading"])])):y("",!0)])):(a(),r("div",X,[...t[3]||(t[3]=[e("div",{class:"mx-auto flex size-12 shrink-0 items-center justify-center"},[e("span",{role:"img",class:"text-4xl"},"ðŸ¤”")],-1),e("div",{class:"w-full text-center"},[e("h3",{class:"text-xl font-semibold leading-6 text-gray-600"}," What are you trying to do? "),e("p",{class:"mt-4 text-sm text-gray-500"}," Add languages to your project, then come back to publish translations when you're ready. ")],-1)])])),e("div",{class:x(["grid grid-cols-1 gap-6 border-t px-6 py-4",{"md:grid-cols-2":i.canPublish}])},[c(h,{variant:"secondary",type:"button",size:"lg",tabindex:"1",onClick:s(p)},{default:m(()=>[...t[4]||(t[4]=[b(" Close ",-1)])]),_:1},8,["onClick"]),i.canPublish?(a(),C(h,{key:0,variant:"primary",type:"button",size:"lg",disabled:s(l)||s(n),"is-loading":s(l),onClick:g},{default:m(()=>[...t[5]||(t[5]=[b(" Publish ",-1)])]),_:1},8,["disabled","is-loading"])):y("",!0)],2)]),_:1})],64)}}});export{le as default};
